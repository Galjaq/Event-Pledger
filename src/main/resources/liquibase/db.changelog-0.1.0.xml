<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.0.xsd">

    <changeSet id="initall" author="galynka">
        <sql>
            CREATE TABLE `event` (
            `id` varchar(32) NOT NULL,
            `topic` varchar(45) DEFAULT 'null',
            `description` varchar(255) DEFAULT NULL,
            `pic` varchar(45) DEFAULT NULL,
            `status` int(11) DEFAULT NULL,
            `price` float DEFAULT NULL,
            PRIMARY KEY (`id`)
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8;


            INSERT INTO `event` VALUES ('1','test topic','descrition',NULL,1,10);

            CREATE TABLE `review` (
            `id` varchar(16) NOT NULL,
            `topic` varchar(45) DEFAULT NULL,
            `description` varchar(45) DEFAULT NULL,
            `event_id` varchar(16) DEFAULT NULL,
            PRIMARY KEY (`id`)
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8;


            INSERT INTO `review` VALUES ('1','1','1','1');

            CREATE TABLE `users` (
            `username` varchar(45) NOT NULL,
            `password` varchar(60) NOT NULL,
            `enabled` tinyint(4) NOT NULL DEFAULT '1',
            PRIMARY KEY (`username`)
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8;

            INSERT INTO `users` VALUES ('galynka','$2a$10$04TVADrR6/SPLBjsK0N30.Jf5fNjBugSACeGv1S69dZALR7lSov0y',1),('admin','$2a$10$04TVADrR6/SPLBjsK0N30.Jf5fNjBugSACeGv1S69dZALR7lSov0y',1);

            CREATE TABLE `user_roles` (
            `user_role_id` int(11) NOT NULL AUTO_INCREMENT,
            `username` varchar(45) NOT NULL,
            `role` varchar(45) NOT NULL,
            PRIMARY KEY (`user_role_id`),
            UNIQUE KEY `uni_username_role` (`role`,`username`),
            KEY `fk_username_idx` (`username`),
            CONSTRAINT `fk_username` FOREIGN KEY (`username`) REFERENCES `users` (`username`)
            ) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;

            --
            -- Dumping data for table `user_roles`
            --
            INSERT INTO `user_roles` VALUES (2,'admin','ROLE_ADMIN'),(3,'galynka','ROLE_USER'),(1,'admin','ROLE_USER');
        </sql>
    </changeSet>

</databaseChangeLog>